//////////////////////////////////////////////////////////////////////////////////////////////
// DO NOT MODIFY THIS FILE                                                                  //
// This file is automatically generated by ZenStack CLI and should not be manually updated. //
//////////////////////////////////////////////////////////////////////////////////////////////

datasource db {
    provider = "postgresql"
    url = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
    binaryTargets = ["native"]
    previewFeatures = ["extendedWhereUnique","fieldReference"]
}

enum Role {
    USER
    ADMIN
}

/// @@allow('create,read', true)
/// @@allow('all', auth() == this)
model User {
    createdAt DateTime @default(now())
    editedAt DateTime @default(now())
    id String @id() @unique()
    username String
    avatar String @default("https://i.pinimg.com/736x/4f/09/97/4f0997ce37fd4dd022fbb3c09083dbb4.jpg")
    banner String @default("https://img.guildedcdn.com/asset/Default/ProfileBannerLarge.png")
    pixels Pixel[]
    totalPixelsChanged Int @default(0)
    role Role @default(USER)
}

/// @@allow('read', true)
/// @@allow('create,update,delete', auth().role == 'ADMIN')
model Board {
    createdAt DateTime @default(now())
    editedAt DateTime @default(now())
    id String @id() @unique() @default(cuid())
    /// @length(3, 20)
    name String
    /// @length(3, 100)
    description String?
    dimX Int
    dimY Int
    pixels Pixel[]
}

/// @@allow('read,update', true)
/// @@allow('create,delete', auth().role == 'ADMIN')
model Pixel {
    createdAt DateTime @default(now())
    editedAt DateTime @default(now())
    board Board @relation(fields: [boardId], references: [id])
    boardId String
    x Int
    y Int
    color String
    user User @relation(fields: [userId], references: [id])
    userId String

    @@unique([boardId, x, y], name: "PixelIdentifier")
}